import{V as q,b as ee,W as $,X as W,Y as O,Z as ae,_ as re,c as J,j as ne,$ as fe,a0 as ie,a1 as U,a2 as H,a3 as M,a4 as le,a5 as se,a6 as X,a7 as te,a8 as V,a9 as ue,aa as ce,s as B,ab as y,ac as ve,ad as z,ae as G,af as K,ag as de,ah as oe,ai as L,q as _e,aj as he,ak as pe,al as ge,am as me,an as Ee,ao as Ae,w as Se}from"./Cb24VUMr.js";function ke(a,r){return r}function xe(a,r,i){for(var _=[],c=r.length,l=0;l<c;l++)ge(r[l].e,_,!0);me(_,()=>{var e=_.length===0&&i!==null;if(e){var v=i,f=v.parentNode;Ee(f),f.append(v),a.items.clear(),E(a,r[0].prev,r[c-1].next)}for(var h=0;h<c;h++){var s=r[h];e||(a.items.delete(s.k),E(a,s.prev,s.next)),Ae(s.e,!e)}a.first===r[0]&&(a.first=r[0].prev)})}function Ne(a,r,i,_,c,l=null){var e=a,v=new Map,f=null,h=(r&$)!==0,s=(r&z)!==0,A=(r&G)!==0;if(h){var o=a;e=O?W(ae(o)):o.appendChild(q())}O&&re();var t=null,T=ne(()=>{var d=i();return ve(d)?d:d==null?[]:y(d)}),g,n=!0;function u(){Te(I,g,e,r,_),t!==null&&(g.length===0?(t.fragment?(e.before(t.fragment),t.fragment=null):K(t.effect),C.first=t.effect):de(t.effect,()=>{t=null}))}var C=ee(()=>{g=J(T);var d=g.length;let w=!1;if(O){var D=fe(e)===ie;D!==(d===0)&&(e=U(),W(e),H(!1),w=!0)}for(var S=new Set,x=te,k=null,R=ue(),m=0;m<d;m+=1){O&&M.nodeType===le&&M.data===se&&(e=M,w=!0,H(!1));var N=g[m],b=_(N,m),p=n?null:v.get(b);p?(s&&X(p.v,N),A?X(p.i,m):p.i=m,R&&x.skipped_effects.delete(p.e)):(p=be(n?e:null,k,N,b,m,c,r,i),n&&(p.o=!0,k===null?f=p:k.next=p,k=p),v.set(b,p)),S.add(b)}if(d===0&&l&&!t)if(n)t={fragment:null,effect:V(()=>l(e))};else{var Y=document.createDocumentFragment(),F=q();Y.append(F),t={fragment:Y,effect:V(()=>l(F))}}if(O&&d>0&&W(U()),!n)if(R){for(const[Q,j]of v)S.has(Q)||x.skipped_effects.add(j.e);x.oncommit(u),x.ondiscard(()=>{})}else u();w&&H(!0),J(T)}),I={effect:C,items:v,first:f};n=!1,O&&(e=M)}function Te(a,r,i,_,c){var R,m,N,b;var l=(_&he)!==0,e=r.length,v=a.items,f=a.first,h,s=null,A,o=[],t=[],T,g,n,u;if(l)for(u=0;u<e;u+=1)T=r[u],g=c(T,u),n=v.get(g),(R=n.a)==null||R.measure(),(A??(A=new Set)).add(n);for(u=0;u<e;u+=1){if(T=r[u],g=c(T,u),n=v.get(g),a.first??(a.first=n),!n.o){n.o=!0;var C=s?s.next:f;E(a,s,n),E(a,n,C),P(n,C,i),s=n,o=[],t=[],f=s.next;continue}if((n.e.f&L)!==0&&(K(n.e),l&&((m=n.a)==null||m.unfix(),(A??(A=new Set)).delete(n))),n!==f){if(h!==void 0&&h.has(n)){if(o.length<t.length){var I=t[0],d;s=I.prev;var w=o[0],D=o[o.length-1];for(d=0;d<o.length;d+=1)P(o[d],I,i);for(d=0;d<t.length;d+=1)h.delete(t[d]);E(a,w.prev,D.next),E(a,s,w),E(a,D,I),f=I,s=D,u-=1,o=[],t=[]}else h.delete(n),P(n,f,i),E(a,n.prev,n.next),E(a,n,s===null?a.first:s.next),E(a,s,n),s=n;continue}for(o=[],t=[];f!==null&&f.k!==g;)(f.e.f&L)===0&&(h??(h=new Set)).add(f),t.push(f),f=f.next;if(f===null)continue;n=f}o.push(n),s=n,f=n.next}if(f!==null||h!==void 0){for(var S=h===void 0?[]:y(h);f!==null;)(f.e.f&L)===0&&S.push(f),f=f.next;var x=S.length;if(x>0){var k=(_&$)!==0&&e===0?i:null;if(l){for(u=0;u<x;u+=1)(N=S[u].a)==null||N.measure();for(u=0;u<x;u+=1)(b=S[u].a)==null||b.fix()}xe(a,S,k)}}l&&_e(()=>{var p;if(A!==void 0)for(n of A)(p=n.a)==null||p.apply()})}function be(a,r,i,_,c,l,e,v){var f=(e&z)!==0,h=(e&oe)===0,s=f?h?ce(i,!1,!1):B(i):i,A=(e&G)===0?c:B(c),o={i:A,v:s,k:_,a:null,e:null,o:!1,prev:r,next:null};try{if(a===null){var t=document.createDocumentFragment();t.append(a=q())}return o.e=V(()=>l(a,s,A,v)),r!==null&&(r.next=o),o}finally{}}function P(a,r,i){for(var _=a.next?a.next.e.nodes_start:i,c=r?r.e.nodes_start:i,l=a.e.nodes_start;l!==null&&l!==_;){var e=pe(l);c.before(l),l=e}}function E(a,r,i){r===null?(a.first=i,a.effect.first=i&&i.e):(r.e.next&&(r.e.next.prev=null),r.next=i,r.e.next=i&&i.e),i===null?a.effect.last=r&&r.e:(i.e.prev&&(i.e.prev.next=null),i.prev=r,i.e.prev=r&&r.e)}const Z={hasOnboarded:!1,role:null,nickname:"",isWardenRegistered:!1,isWardenActive:!1,selectedProfile:null};function Ie(){const a=localStorage.getItem("arkham_user"),r=a?JSON.parse(a):Z,{subscribe:i,set:_,update:c}=Se(r),l=e=>{localStorage.setItem("arkham_user",JSON.stringify(e))};return{subscribe:i,set:e=>{l(e),_(e)},update:e=>{c(v=>{const f=e(v);return l(f),f})},selectProfile:e=>{c(v=>({...v,selectedProfile:e,role:e.includes("warden")?"warden":"seeker"}))},completeOnboarding:(e,v)=>{c(f=>({...f,hasOnboarded:!0,role:e,nickname:v,selectedProfile:e}))},registerWarden:()=>{c(e=>({...e,isWardenRegistered:!0}))},toggleWardenActive:()=>{c(e=>({...e,isWardenActive:!e.isWardenActive}))},logout:()=>{_(Z)}}}const Oe=Ie();export{Ne as e,ke as i,Oe as u};
