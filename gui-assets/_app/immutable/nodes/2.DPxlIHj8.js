import{d as q,c as C,a as t,f as l,s as j}from"../chunks/DyHV4W86.js";import{z as J,d as K,A as Q,f as b,B as R,C as n,F as u,G as o,H as A,c as z}from"../chunks/Cb24VUMr.js";import{s as U,i as h,a as V}from"../chunks/CgxTIbXL.js";import{u as F,e as X,i as Z}from"../chunks/CUVr-AFG.js";import{g}from"../chunks/BWCJPX9B.js";const $=async({fetch:_})=>{try{const e=await _("http://localhost:8088/api/profiles");return e.ok?{profiles:await e.json()}:{profiles:[],error:"Failed to connect to the Arkham backend."}}catch(e){return console.error("Error fetching profiles:",e),{profiles:[],error:"Could not connect to the Arkham backend. Is the CLI running?"}}},fe=Object.freeze(Object.defineProperty({__proto__:null,load:$},Symbol.toStringTag,{value:"Module"}));var ee=l('<div class="rounded-md border border-destructive bg-destructive/10 p-4 text-destructive-foreground"><h3 class="font-semibold">Connection Error</h3> <p> </p></div>'),re=l('<button class="w-full rounded-md bg-primary py-3 text-primary-foreground transition-colors hover:bg-primary/90"><span class="capitalize"> </span></button>'),te=l('<p class="mb-6 text-muted-foreground">Please select a profile to continue.</p> <div class="flex flex-col space-y-3"></div> <div class="my-4 flex items-center"><div class="flex-grow border-t border-muted"></div> <span class="mx-4 flex-shrink text-xs uppercase text-muted-foreground">Or</span> <div class="flex-grow border-t border-muted"></div></div> <button class="w-full rounded-md border border-input bg-transparent py-3 text-foreground transition-colors hover:bg-accent">Create New Profile</button>',1),oe=l('<p class="mb-6 text-muted-foreground">Get started by creating your first profile.</p> <button class="w-full rounded-md bg-primary py-3 text-primary-foreground transition-colors hover:bg-primary/90">Create Your First Profile</button>',1),ae=l('<div class="flex min-h-screen flex-col items-center justify-center bg-background text-foreground"><div class="w-full max-w-md rounded-lg border p-8 text-center shadow-lg"><h1 class="mb-6 text-3xl font-bold text-primary">Welcome to Arkham</h1> <!></div></div>'),se=l('<div class="flex items-center justify-center min-h-screen"><div class="text-center"><div class="w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"></div> <p class="mt-4 text-muted-foreground">Loading Dashboard...</p></div></div>');function ue(_,e){J(e,!0);const y=()=>U(F,"$userStore",O),[O,E]=V();let v=K(y());Q(()=>{v.selectedProfile&&(v.role==="warden"?g("/warden",{replaceState:!0}):v.role==="seeker"&&g("/seeker",{replaceState:!0}))});function G(r){F.selectProfile(r)}var k=C(),I=b(k);{var L=r=>{var d=ae(),w=n(d),D=u(n(w),2);{var H=a=>{var s=ee(),p=u(n(s),2),x=n(p,!0);o(p),o(s),A(()=>j(x,e.data.error)),t(a,s)},M=a=>{var s=C(),p=b(s);{var x=i=>{var c=te(),f=u(b(c),2);X(f,21,()=>e.data.profiles,Z,(W,P)=>{var m=re();m.__click=()=>G(z(P));var S=n(m),Y=n(S,!0);o(S),o(m),A(()=>j(Y,z(P))),t(W,m)}),o(f);var T=u(f,4);T.__click=()=>g("/onboarding"),t(i,c)},N=i=>{var c=oe(),f=u(b(c),2);f.__click=()=>g("/onboarding"),t(i,c)};h(p,i=>{e.data.profiles&&e.data.profiles.length>0?i(x):i(N,!1)},!0)}t(a,s)};h(D,a=>{e.data.error?a(H):a(M,!1)})}o(w),o(d),t(r,d)},B=r=>{var d=se();t(r,d)};h(I,r=>{v.selectedProfile?r(B,!1):r(L)})}t(_,k),R(),E()}q(["click"]);export{ue as component,fe as universal};
