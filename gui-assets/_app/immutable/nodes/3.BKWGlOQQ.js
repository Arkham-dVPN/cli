import{u as Wt,e as nt,i as it}from"../chunks/DFyFtZMB.js";import{ao as Gt,b as Ut,X as _t,Z as Vt,ap as Nt,$ as Xt,W as Yt,a0 as Jt,a1 as St,q as Qt,a5 as At,s as jt,a9 as $t,aq as te,ar as ee,as as ae,at as re,au as se,av as oe,aw as ne,z as ie,f as N,h as dt,C as r,F as i,H as S,B as de,I as Bt,G as a,c as t,ax as at,ay as ve}from"../chunks/CYtTFtD_.js";import{d as le,f as c,a as o,s as _,c as ft,t as rt}from"../chunks/BOaHAOf9.js";import{B as ce,i as f}from"../chunks/BE3f0_xd.js";import{a as vt,d as pe}from"../chunks/BrH4xPQt.js";import{B as me}from"../chunks/CG6ldC5V.js";import{f as yt,a as It,b as ue,d as _e,e as fe}from"../chunks/BQ3hKCLl.js";const Lt=0,Et=1;function ye(J,Q,j,k,D){_t&&Vt();var lt=Gt(),P=oe,K=lt?jt(P):$t(P,!1,!1),tt=lt?jt(P):$t(P,!1,!1),M=new ce(J);Ut(()=>{var y=Q(),Z=!1;let $=_t&&Nt(y)===(J.data===Xt);if($&&(Yt(Jt()),St(!1)),Nt(y)){var xt=te(),W=!1;const z=B=>{if(!Z){W=!0,xt(!1),ee.ensure(),_t&&St(!1);try{B()}finally{ae(),re||se()}}};y.then(B=>{z(()=>{At(K,B),M.ensure(Et,k&&(G=>k(G,K)))})},B=>{z(()=>{if(At(tt,B),M.ensure(Et,D&&(G=>D(G,tt))),!D)throw tt.v})}),_t?M.ensure(Lt,j):Qt(()=>{W||z(()=>{M.ensure(Lt,j)})})}else At(K,y),M.ensure(Et,k&&(z=>k(z,K)));return $&&St(!0),()=>{Z=!0}})}const xe=!1,ge=async({fetch:J})=>{const j=ne(Wt).selectedProfile;if(!j)return{solHistory:[],arkhamHistory:[],connectionHistory:[]};try{const k=await J(`/api/history?profile=${j}`);if(!k.ok)throw new Error(`Failed to fetch history: ${k.statusText}`);const D=await k.json();return console.log("--- Raw History API Response ---:",D),{solHistory:D.solHistory||[],arkhamHistory:D.arkhamHistory||[],connectionHistory:D.connectionHistory||[]}}catch(k){return console.error("Error loading history data:",k),{solHistory:[],arkhamHistory:[],connectionHistory:[],error:k.message}}},We=Object.freeze(Object.defineProperty({__proto__:null,load:ge,ssr:xe},Symbol.toStringTag,{value:"Module"}));var he=c('<div class="bg-card p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer" role="button" tabindex="0"><div class="flex justify-between items-center"><div><p class="font-semibold"> </p> <p class="text-sm text-muted-foreground"> </p></div> <div class="text-right"><p> </p></div></div></div>'),be=c('<p class="text-center text-muted-foreground py-8">No SOL transaction history.</p>'),ke=c("<!> <!>",1),we=c('<div class="bg-card p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer" role="button" tabindex="0"><div class="flex justify-between items-center"><div><p class="font-semibold"> </p> <p class="text-sm text-muted-foreground"> </p></div> <div class="text-right"><p> </p></div></div></div>'),Te=c('<p class="text-center text-muted-foreground py-8">No ARKHAM token history.</p>'),He=c("<!> <!>",1),Se=c('<p class="text-sm text-muted-foreground"> </p>'),Ae=c('<p class="font-mono text-primary"> </p> <!>',1),Ee=c('<p class="font-mono text-primary"><!></p> <p class="text-sm text-muted-foreground"> </p>',1),De=c('<div class="bg-card p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer" role="button" tabindex="0"><div class="flex justify-between items-center"><div><p class="font-semibold"> </p> <p class="text-sm text-muted-foreground"> </p></div> <div class="text-right"><!></div></div></div>'),Re=c('<p class="text-center text-muted-foreground py-8">No connection history.</p>'),Oe=c("<!> <!>",1),Ce=c('<div class="space-y-4"><!> <!> <!></div>'),Ne=c('<div class="text-center py-8"><p class="text-red-500">Failed to load transaction history.</p> <p class="text-muted-foreground text-sm mt-2"> </p></div>'),je=c('<div class="bg-card p-4 rounded-lg shadow-sm animate-pulse"><div class="flex justify-between items-center"><div><div class="h-5 w-32 bg-muted rounded"></div> <div class="h-4 w-24 bg-muted rounded mt-2"></div></div> <div class="text-right"><div class="h-5 w-20 bg-muted rounded"></div></div></div></div>'),$e=c('<div class="space-y-4"></div>'),Be=c('<div class="flex justify-between"><span class="text-muted-foreground capitalize"> </span> <span class="font-mono text-right"><!></span></div>'),Ie=c('<button type="button" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center w-full h-full"><div class="bg-card rounded-xl p-6 w-full max-w-md" role="dialog" aria-modal="true"><h3 class="text-lg font-bold mb-4">Transaction Details</h3> <div class="space-y-2 text-sm"></div> <div class="mt-6 text-center"><a target="_blank" rel="noopener noreferrer" class="text-primary hover:underline text-sm">View on Orb</a></div></div></button>'),Le=c('<div class="container mx-auto p-4 md:p-8"><h1 class="text-3xl font-bold mb-6">Transaction History</h1> <div class="border-b border-gray-200 dark:border-gray-700 mb-6"><nav class="-mb-px flex space-x-6" aria-label="Tabs"><button>SOL</button> <button>ARKHAM</button> <button>Connections</button></nav></div> <!></div> <!> <!>',1);function Ge(J,Q){ie(Q,!0);const j=at(()=>Q.data),k=["SOLTransferReceived","SOLTransferSent","EarningsClaimed","EscrowDeposited"],D=["ArkhamTokenReceived","ArkhamTokenSent","ArkhamTokensClaimed"],lt=["WardenRegistered","ConnectionStarted","BandwidthProofSubmitted","ConnectionEnded"],P=at(()=>{var s;return[...t(j).solHistory??[],...t(j).arkhamHistory??[],...((s=t(j).connectionHistory)==null?void 0:s.map(l=>({...l,type:"ConnectionEnded"})))??[]]}),K=at(()=>t(P).filter(s=>s.type&&k.includes(s.type)).sort((s,l)=>new Date(l.timestamp).getTime()-new Date(s.timestamp).getTime())),tt=at(()=>t(P).filter(s=>s.type&&D.includes(s.type)).sort((s,l)=>new Date(l.timestamp).getTime()-new Date(s.timestamp).getTime())),M=at(()=>t(P).filter(s=>s.type&&lt.includes(s.type)).sort((s,l)=>new Date(l.timestamp).getTime()-new Date(s.timestamp).getTime()));let y=Bt("sol"),Z=Bt(null);function $(s){dt(Z,s,!0)}function xt(s){s.currentTarget===s.target&&dt(Z,null)}function W(s){return["SOLTransferReceived","EarningsClaimed","ArkhamTokenReceived","ArkhamTokensClaimed"].includes(s)}var z=Le(),B=N(z),G=i(r(B),2),Dt=r(G),gt=r(Dt);gt.__click=()=>dt(y,"sol");var ht=i(gt,2);ht.__click=()=>dt(y,"arkham");var Rt=i(ht,2);Rt.__click=()=>dt(y,"connections"),a(Dt),a(G);var Pt=i(G,2);ye(Pt,()=>Q.data,s=>{var l=$e();nt(l,20,()=>Array(5),it,(A,R)=>{var q=je();o(A,q)}),a(l),o(s,l)},(s,l)=>{var A=Ce(),R=r(A);{var q=x=>{var p=ke(),E=N(p);nt(E,17,()=>t(K),it,(d,e)=>{var v=he();v.__click=()=>$(t(e)),v.__keydown=m=>m.key==="Enter"&&$(t(e));var O=r(v),g=r(O),w=r(g),X=r(w,!0);a(w);var C=i(w,2),h=r(C,!0);a(C),a(g);var b=i(g,2),T=r(b),I=r(T);a(T),a(b),a(O),a(v),S((m,n,u,H,Y)=>{_(X,m),_(h,n),vt(T,1,`font-mono ${u??""}`),_(I,`${H??""}
									${Y??""} SOL`)},[()=>{var m;return(m=t(e).type)==null?void 0:m.replace(/([A-Z])/g," $1").trim()},()=>yt(t(e).timestamp),()=>W(t(e).type)?"text-green-500":"text-red-500",()=>W(t(e).type)?"+":"-",()=>It(t(e).amount)]),o(d,v)});var U=i(E,2);{var V=d=>{var e=be();o(d,e)};f(U,d=>{t(K).length===0&&d(V)})}o(x,p)};f(R,x=>{t(y)==="sol"&&x(q)})}var ct=i(R,2);{var bt=x=>{var p=He(),E=N(p);nt(E,17,()=>t(tt),it,(d,e)=>{var v=we();v.__click=()=>$(t(e)),v.__keydown=m=>m.key==="Enter"&&$(t(e));var O=r(v),g=r(O),w=r(g),X=r(w,!0);a(w);var C=i(w,2),h=r(C,!0);a(C),a(g);var b=i(g,2),T=r(b),I=r(T);a(T),a(b),a(O),a(v),S((m,n,u,H,Y)=>{_(X,m),_(h,n),vt(T,1,`font-mono ${u??""}`),_(I,`${H??""} ${Y??""} ARKHAM`)},[()=>{var m;return(m=t(e).type)==null?void 0:m.replace(/([A-Z])/g," $1").trim()},()=>yt(t(e).timestamp),()=>W(t(e).type)?"text-green-500":"text-red-500",()=>W(t(e).type)?"+":"-",()=>ue(t(e).amount)]),o(d,v)});var U=i(E,2);{var V=d=>{var e=Te();o(d,e)};f(U,d=>{t(tt).length===0&&d(V)})}o(x,p)};f(ct,x=>{t(y)==="arkham"&&x(bt)})}var kt=i(ct,2);{var pt=x=>{var p=Oe(),E=N(p);nt(E,17,()=>t(M),it,(d,e)=>{var v=De();v.__click=()=>$(t(e)),v.__keydown=n=>n.key==="Enter"&&$(t(e));var O=r(v),g=r(O),w=r(g),X=r(w,!0);a(w);var C=i(w,2),h=r(C,!0);a(C),a(g);var b=i(g,2),T=r(b);{var I=n=>{var u=Ae(),H=N(u),Y=r(H,!0);a(H);var st=i(H,2);{var mt=L=>{var ot=Se(),wt=r(ot,!0);a(ot),S(Tt=>_(wt,Tt),[()=>fe(t(e).duration)]),o(L,ot)};f(st,L=>{t(e).duration&&L(mt)})}S(L=>_(Y,L),[()=>_e(t(e).bandwidth)]),o(n,u)},m=n=>{var u=ft(),H=N(u);{var Y=st=>{var mt=Ee(),L=N(mt),ot=r(L);{var wt=F=>{var ut=rt("Stake");o(F,ut)},Tt=F=>{var ut=ft(),qt=N(ut);{var Ft=et=>{var Ht=rt("Escrow");o(et,Ht)},Kt=et=>{var Ht=rt("Proof");o(et,Ht)};f(qt,et=>{t(e).type==="ConnectionStarted"?et(Ft):et(Kt,!1)},!0)}o(F,ut)};f(ot,F=>{t(e).type==="WardenRegistered"?F(wt):F(Tt,!1)})}a(L);var Ct=i(L,2),zt=r(Ct);a(Ct),S(F=>_(zt,`${F??""} SOL`),[()=>It(t(e).amount)]),o(st,mt)};f(H,st=>{"amount"in t(e)&&st(Y)},!0)}o(n,u)};f(T,n=>{"bandwidth"in t(e)&&t(e).bandwidth?n(I):n(m,!1)})}a(b),a(O),a(v),S((n,u)=>{_(X,n),_(h,u)},[()=>{var n;return t(e).type==="BandwidthProofSubmitted"?"Throughput Certificate Submitted":(n=t(e).type)==null?void 0:n.replace(/([A-Z])/g," $1").trim()},()=>yt(t(e).timestamp)]),o(d,v)});var U=i(E,2);{var V=d=>{var e=Re();o(d,e)};f(U,d=>{t(M).length===0&&d(V)})}o(x,p)};f(kt,x=>{t(y)==="connections"&&x(pt)})}a(A),o(s,A)},(s,l)=>{var A=Ne(),R=i(r(A),2),q=r(R,!0);a(R),a(A),S(()=>_(q,t(l).message)),o(s,A)}),a(B);var Ot=i(B,2);{var Mt=s=>{var l=Ie();l.__click=xt;var A=r(l),R=i(r(A),2);nt(R,21,()=>Object.entries(t(Z)),it,(bt,kt)=>{var pt=at(()=>ve(t(kt),2));let x=()=>t(pt)[0],p=()=>t(pt)[1];var E=ft(),U=N(E);{var V=d=>{var e=Be(),v=r(e),O=r(v,!0);a(v);var g=i(v,2),w=r(g);{var X=h=>{var b=rt();S((T,I)=>_(b,`${T??""}...${I??""}`),[()=>p().slice(0,6),()=>p().slice(-6)]),o(h,b)},C=h=>{var b=ft(),T=N(b);{var I=n=>{var u=rt();S(H=>_(u,H),[()=>yt(p())]),o(n,u)},m=n=>{var u=rt();S(H=>_(u,H),[()=>String(p())]),o(n,u)};f(T,n=>{x()==="timestamp"?n(I):n(m,!1)},!0)}o(h,b)};f(w,h=>{typeof p()=="string"&&p().length>30?h(X):h(C,!1)})}a(g),a(e),S(h=>_(O,h),[()=>x().replace(/([A-Z])/g," $1").trim()]),o(d,e)};f(U,d=>{p()!==void 0&&p()!==null&&p()!==""&&d(V)})}o(bt,E)}),a(R);var q=i(R,2),ct=r(q);a(q),a(A),a(l),S(()=>pe(ct,"href",`https://orb.helius.dev/tx/${t(Z).signature??""}?cluster=devnet`)),o(s,l)};f(Ot,s=>{t(Z)&&s(Mt)})}var Zt=i(Ot,2);me(Zt,{active:"history"}),S(()=>{vt(gt,1,`px-3 py-2 font-medium text-sm rounded-md ${t(y)==="sol"?"bg-primary/10 text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`),vt(ht,1,`px-3 py-2 font-medium text-sm rounded-md ${t(y)==="arkham"?"bg-primary/10 text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`),vt(Rt,1,`px-3 py-2 font-medium text-sm rounded-md ${t(y)==="connections"?"bg-primary/10 text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`)}),o(J,z),de()}le(["click","keydown"]);export{Ge as component,We as universal};
