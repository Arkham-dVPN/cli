import{u as ae,e as nt,i as it}from"../chunks/CUVr-AFG.js";import{ap as oe,b as se,Y as kt,_ as ne,aq as Pt,a0 as ie,X as de,a1 as ve,a2 as Nt,q as le,a6 as Ot,s as Zt,aa as zt,ar as ce,as as ue,at as pe,au as me,av as _e,aw as fe,ax as ye,z as ge,f as H,h as dt,C as a,F as n,H as b,B as xe,I as Kt,G as r,c as t,K as Q,J as qt,ay as he}from"../chunks/Cb24VUMr.js";import{d as be,f as l,a as s,s as m,c as mt,t as vt}from"../chunks/DyHV4W86.js";import{B as ke,i as _}from"../chunks/CgxTIbXL.js";import{a as lt,d as we}from"../chunks/MWJupxPW.js";import{B as Te}from"../chunks/4Dol9MRl.js";import{f as _t,a as Ft,b as He,d as Se,e as Ee}from"../chunks/DMy_Ik4c.js";const Gt=0,jt=1;function Ae(tt,et,M,S,R){kt&&ne();var ft=oe(),rt=fe,z=ft?Zt(rt):zt(rt,!1,!1),at=ft?Zt(rt):zt(rt,!1,!1),q=new ke(tt);se(()=>{var J=et(),ct=!1;let k=kt&&Pt(J)===(tt.data===ie);if(k&&(de(ve()),Nt(!1)),Pt(J)){var U=ce(),N=!1;const V=P=>{if(!ct){N=!0,U(!1),ue.ensure(),kt&&Nt(!1);try{P()}finally{pe(),me||_e()}}};J.then(P=>{V(()=>{Ot(z,P),q.ensure(jt,S&&(ot=>S(ot,z)))})},P=>{V(()=>{if(Ot(at,P),q.ensure(jt,R&&(ot=>R(ot,at))),!R)throw at.v})}),kt?q.ensure(Gt,M):le(()=>{N||V(()=>{q.ensure(Gt,M)})})}else Ot(z,J),q.ensure(jt,S&&(V=>S(V,z)));return k&&Nt(!0),()=>{ct=!0}})}const Ce=!1,De=async({fetch:tt})=>{const M=ye(ae).selectedProfile;if(!M)return{solHistory:[],arkhamHistory:[],connectionHistory:[],throughputHistory:[]};try{const S=await tt(`/api/history?profile=${M}`);if(!S.ok)throw new Error(`Failed to fetch history: ${S.statusText}`);const R=await S.json();return console.log("--- Raw History API Response ---:",R),{solHistory:R.solHistory||[],arkhamHistory:R.arkhamHistory||[],connectionHistory:R.connectionHistory||[],throughputHistory:R.throughputHistory||[]}}catch(S){return console.error("Error loading history data:",S),{solHistory:[],arkhamHistory:[],connectionHistory:[],throughputHistory:[],error:S.message}}},dr=Object.freeze(Object.defineProperty({__proto__:null,load:De,ssr:Ce},Symbol.toStringTag,{value:"Module"}));var Re=l('<div class="bg-card p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer" role="button" tabindex="0"><div class="flex justify-between items-center"><div><p class="font-semibold"> </p> <p class="text-sm text-muted-foreground"> </p></div> <div class="text-right"><p> </p></div></div></div>'),Ne=l('<p class="text-center text-muted-foreground py-8">No SOL transaction history.</p>'),Oe=l("<!> <!>",1),je=l('<div class="bg-card p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer" role="button" tabindex="0"><div class="flex justify-between items-center"><div><p class="font-semibold"> </p> <p class="text-sm text-muted-foreground"> </p></div> <div class="text-right"><p> </p></div></div></div>'),Be=l('<p class="text-center text-muted-foreground py-8">No ARKHAM token history.</p>'),$e=l("<!> <!>",1),Ie=l('<p class="text-sm text-muted-foreground"> </p>'),Le=l('<p class="font-mono text-primary"> </p> <!>',1),Me=l('<p class="font-mono text-primary"> </p> <p class="text-sm text-muted-foreground">Submitted</p>',1),Pe=l('<p class="font-mono text-primary"><!></p> <p class="text-sm text-muted-foreground"> </p>',1),Ze=l('<div class="bg-card p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer" role="button" tabindex="0"><div class="flex justify-between items-center"><div><p class="font-semibold"> </p> <p class="text-sm text-muted-foreground"> </p></div> <div class="text-right"><!></div></div></div>'),ze=l('<p class="text-center text-muted-foreground py-8">No connection history.</p>'),Ke=l("<!> <!>",1),qe=l('<p class="font-mono text-primary"> </p> <p class="text-sm text-muted-foreground">Submitted</p>',1),Fe=l('<div class="bg-card p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer" role="button" tabindex="0"><div class="flex justify-between items-center"><div><p class="font-semibold">Throughput Certificate</p> <p class="text-sm text-muted-foreground"> </p></div> <div class="text-right"><!></div></div></div>'),Ge=l('<p class="text-center text-muted-foreground py-8">No throughput history.</p>'),We=l("<!> <!>",1),Ye=l('<div class="space-y-4"><!> <!> <!> <!></div>'),Je=l('<div class="text-center py-8"><p class="text-red-500">Failed to load transaction history.</p> <p class="text-muted-foreground text-sm mt-2"> </p></div>'),Ue=l('<div class="bg-card p-4 rounded-lg shadow-sm animate-pulse"><div class="flex justify-between items-center"><div><div class="h-5 w-32 bg-muted rounded"></div> <div class="h-4 w-24 bg-muted rounded mt-2"></div></div> <div class="text-right"><div class="h-5 w-20 bg-muted rounded"></div></div></div></div>'),Ve=l('<div class="space-y-4"></div>'),Xe=l('<div class="flex justify-between"><span class="text-muted-foreground capitalize"> </span> <span class="font-mono text-right"><!></span></div>'),Qe=l('<button type="button" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center w-full h-full"><div class="bg-card rounded-xl p-6 w-full max-w-md" role="dialog" aria-modal="true"><h3 class="text-lg font-bold mb-4">Transaction Details</h3> <div class="space-y-2 text-sm"></div> <div class="mt-6 text-center"><a target="_blank" rel="noopener noreferrer" class="text-primary hover:underline text-sm">View on Orb</a></div></div></button>'),tr=l('<div class="container mx-auto p-4 md:p-8"><h1 class="text-3xl font-bold mb-6">Transaction History</h1> <div class="border-b border-gray-200 dark:border-gray-700 mb-6"><nav class="-mb-px flex space-x-6" aria-label="Tabs"><button>SOL</button> <button>ARKHAM</button> <button>Connections</button> <button>Throughput</button></nav></div> <!></div> <!> <!>',1);function vr(tt,et){ge(et,!0);const M=Q(()=>et.data),S=["SOLTransferReceived","SOLTransferSent","EarningsClaimed","EscrowDeposited"],R=["ArkhamTokenReceived","ArkhamTokenSent","ArkhamTokensClaimed"],ft=["WardenRegistered","ConnectionStarted","ConnectionEnded"],rt=["ThroughputCertificateSubmitted"],z=Q(()=>{var o;return[...t(M).solHistory??[],...t(M).arkhamHistory??[],...t(M).throughputHistory??[],...((o=t(M).connectionHistory)==null?void 0:o.map(u=>({...u,type:"ConnectionEnded"})))??[]]}),at=Q(()=>t(z).filter(o=>o.type&&S.includes(o.type)).sort((o,u)=>new Date(u.timestamp).getTime()-new Date(o.timestamp).getTime())),q=Q(()=>t(z).filter(o=>o.type&&R.includes(o.type)).sort((o,u)=>new Date(u.timestamp).getTime()-new Date(o.timestamp).getTime())),J=Q(()=>t(z).filter(o=>o.type&&ft.includes(o.type)).sort((o,u)=>new Date(u.timestamp).getTime()-new Date(o.timestamp).getTime())),ct=Q(()=>t(z).filter(o=>o.type&&rt.includes(o.type)).sort((o,u)=>new Date(u.timestamp).getTime()-new Date(o.timestamp).getTime()));let k=Kt("sol"),U=Kt(null);function N(o){dt(U,o,!0)}function V(o){o.currentTarget===o.target&&dt(U,null)}function P(o){return["SOLTransferReceived","EarningsClaimed","ArkhamTokenReceived","ArkhamTokensClaimed"].includes(o)}var ot=tr(),wt=H(ot),Tt=n(a(wt),2),Bt=a(Tt),Ht=a(Bt);Ht.__click=()=>dt(k,"sol");var St=n(Ht,2);St.__click=()=>dt(k,"arkham");var Et=n(St,2);Et.__click=()=>dt(k,"connections");var $t=n(Et,2);$t.__click=()=>dt(k,"throughput"),r(Bt),r(Tt);var Wt=n(Tt,2);Ae(Wt,()=>et.data,o=>{var u=Ve();nt(u,20,()=>Array(5),it,(D,Z)=>{var F=Ue();s(D,F)}),r(u),s(o,u)},(o,u)=>{var D=Ye(),Z=a(D);{var F=f=>{var E=Oe(),A=H(E);nt(A,17,()=>t(at),it,(i,e)=>{var d=Re();d.__click=()=>N(t(e)),d.__keydown=v=>v.key==="Enter"&&N(t(e));var C=a(d),y=a(C),x=a(y),h=a(x,!0);r(x);var g=n(x,2),$=a(g,!0);r(g),r(y);var T=n(y,2),p=a(T),w=a(p);r(p),r(T),r(C),r(d),b((v,c,I,K,X)=>{m(h,v),m($,c),lt(p,1,`font-mono ${I??""}`),m(w,`${K??""}
									${X??""} SOL`)},[()=>{var v;return(v=t(e).type)==null?void 0:v.replace(/([A-Z])/g," $1").trim()},()=>_t(t(e).timestamp),()=>P(t(e).type)?"text-green-500":"text-red-500",()=>P(t(e).type)?"+":"-",()=>Ft(t(e).amount)]),s(i,d)});var j=n(A,2);{var B=i=>{var e=Ne();s(i,e)};_(j,i=>{t(at).length===0&&i(B)})}s(f,E)};_(Z,f=>{t(k)==="sol"&&f(F)})}var yt=n(Z,2);{var At=f=>{var E=$e(),A=H(E);nt(A,17,()=>t(q),it,(i,e)=>{var d=je();d.__click=()=>N(t(e)),d.__keydown=v=>v.key==="Enter"&&N(t(e));var C=a(d),y=a(C),x=a(y),h=a(x,!0);r(x);var g=n(x,2),$=a(g,!0);r(g),r(y);var T=n(y,2),p=a(T),w=a(p);r(p),r(T),r(C),r(d),b((v,c,I,K,X)=>{m(h,v),m($,c),lt(p,1,`font-mono ${I??""}`),m(w,`${K??""} ${X??""} ARKHAM`)},[()=>{var v;return(v=t(e).type)==null?void 0:v.replace(/([A-Z])/g," $1").trim()},()=>_t(t(e).timestamp),()=>P(t(e).type)?"text-green-500":"text-red-500",()=>P(t(e).type)?"+":"-",()=>He(t(e).amount)]),s(i,d)});var j=n(A,2);{var B=i=>{var e=Be();s(i,e)};_(j,i=>{t(q).length===0&&i(B)})}s(f,E)};_(yt,f=>{t(k)==="arkham"&&f(At)})}var gt=n(yt,2);{var xt=f=>{var E=Ke(),A=H(E);nt(A,17,()=>t(J),it,(i,e)=>{var d=Ze();d.__click=()=>N(t(e)),d.__keydown=c=>c.key==="Enter"&&N(t(e));var C=a(d),y=a(C),x=a(y),h=a(x,!0);r(x);var g=n(x,2),$=a(g,!0);r(g),r(y);var T=n(y,2),p=a(T);{var w=c=>{var I=Le(),K=H(I),X=a(K,!0);r(K);var Ct=n(K,2);{var G=L=>{var W=Ie(),ut=a(W,!0);r(W),b(pt=>m(ut,pt),[()=>Ee(t(e).duration)]),s(L,W)};_(Ct,L=>{t(e).duration&&L(G)})}b(L=>m(X,L),[()=>Se(t(e).bandwidth)]),s(c,I)},v=c=>{var I=mt(),K=H(I);{var X=G=>{var L=Me(),W=H(L),ut=a(W);r(W),qt(2),b(()=>m(ut,`${t(e).mbConsumed??""} MB`)),s(G,L)},Ct=G=>{var L=mt(),W=H(L);{var ut=pt=>{var Lt=Pe(),Dt=H(Lt),Ut=a(Dt);{var Vt=Y=>{var bt=vt("Stake");s(Y,bt)},Xt=Y=>{var bt=mt(),te=H(bt);{var ee=st=>{var Rt=vt("Escrow");s(st,Rt)},re=st=>{var Rt=vt("Proof");s(st,Rt)};_(te,st=>{t(e).type==="ConnectionStarted"?st(ee):st(re,!1)},!0)}s(Y,bt)};_(Ut,Y=>{t(e).type==="WardenRegistered"?Y(Vt):Y(Xt,!1)})}r(Dt);var Mt=n(Dt,2),Qt=a(Mt);r(Mt),b(Y=>m(Qt,`${Y??""} SOL`),[()=>Ft(t(e).amount)]),s(pt,Lt)};_(W,pt=>{"amount"in t(e)&&pt(ut)},!0)}s(G,L)};_(K,G=>{"mbConsumed"in t(e)&&t(e).mbConsumed?G(X):G(Ct,!1)},!0)}s(c,I)};_(p,c=>{"bandwidth"in t(e)&&t(e).bandwidth?c(w):c(v,!1)})}r(T),r(C),r(d),b((c,I)=>{m(h,c),m($,I)},[()=>{var c;return t(e).type==="BandwidthProofSubmitted"?"Throughput Certificate Submitted":(c=t(e).type)==null?void 0:c.replace(/([A-Z])/g," $1").trim()},()=>_t(t(e).timestamp)]),s(i,d)});var j=n(A,2);{var B=i=>{var e=ze();s(i,e)};_(j,i=>{t(J).length===0&&i(B)})}s(f,E)};_(gt,f=>{t(k)==="connections"&&f(xt)})}var ht=n(gt,2);{var O=f=>{var E=We(),A=H(E);nt(A,17,()=>t(ct),it,(i,e)=>{var d=Fe();d.__click=()=>N(t(e)),d.__keydown=p=>p.key==="Enter"&&N(t(e));var C=a(d),y=a(C),x=n(a(y),2),h=a(x,!0);r(x),r(y);var g=n(y,2),$=a(g);{var T=p=>{var w=qe(),v=H(w),c=a(v);r(v),qt(2),b(()=>m(c,`${t(e).mbConsumed??""} MB`)),s(p,w)};_($,p=>{t(e).mbConsumed&&p(T)})}r(g),r(C),r(d),b(p=>m(h,p),[()=>_t(t(e).timestamp)]),s(i,d)});var j=n(A,2);{var B=i=>{var e=Ge();s(i,e)};_(j,i=>{t(ct).length===0&&i(B)})}s(f,E)};_(ht,f=>{t(k)==="throughput"&&f(O)})}r(D),s(o,D)},(o,u)=>{var D=Je(),Z=n(a(D),2),F=a(Z,!0);r(Z),r(D),b(()=>m(F,t(u).message)),s(o,D)}),r(wt);var It=n(wt,2);{var Yt=o=>{var u=Qe();u.__click=V;var D=a(u),Z=n(a(D),2);nt(Z,21,()=>Object.entries(t(U)),it,(At,gt)=>{var xt=Q(()=>he(t(gt),2));let ht=()=>t(xt)[0],O=()=>t(xt)[1];var f=mt(),E=H(f);{var A=j=>{var B=Xe(),i=a(B),e=a(i,!0);r(i);var d=n(i,2),C=a(d);{var y=h=>{var g=vt();b(($,T)=>m(g,`${$??""}...${T??""}`),[()=>O().slice(0,6),()=>O().slice(-6)]),s(h,g)},x=h=>{var g=mt(),$=H(g);{var T=w=>{var v=vt();b(c=>m(v,c),[()=>_t(O())]),s(w,v)},p=w=>{var v=vt();b(c=>m(v,c),[()=>String(O())]),s(w,v)};_($,w=>{ht()==="timestamp"?w(T):w(p,!1)},!0)}s(h,g)};_(C,h=>{typeof O()=="string"&&O().length>30?h(y):h(x,!1)})}r(d),r(B),b(h=>m(e,h),[()=>ht().replace(/([A-Z])/g," $1").trim()]),s(j,B)};_(E,j=>{O()!==void 0&&O()!==null&&O()!==""&&j(A)})}s(At,f)}),r(Z);var F=n(Z,2),yt=a(F);r(F),r(D),r(u),b(()=>we(yt,"href",`https://orb.helius.dev/tx/${t(U).signature??""}?cluster=devnet`)),s(o,u)};_(It,o=>{t(U)&&o(Yt)})}var Jt=n(It,2);Te(Jt,{active:"history"}),b(()=>{lt(Ht,1,`px-3 py-2 font-medium text-sm rounded-md ${t(k)==="sol"?"bg-primary/10 text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`),lt(St,1,`px-3 py-2 font-medium text-sm rounded-md ${t(k)==="arkham"?"bg-primary/10 text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`),lt(Et,1,`px-3 py-2 font-medium text-sm rounded-md ${t(k)==="connections"?"bg-primary/10 text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`),lt($t,1,`px-3 py-2 font-medium text-sm rounded-md ${t(k)==="throughput"?"bg-primary/10 text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`)}),s(tt,ot),xe()}be(["click","keydown"]);export{vr as component,dr as universal};
